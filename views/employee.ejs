<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee - Vahan Help</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #0056b3;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        h1 {
            text-align: center;
            color: white;
        }

        .btn {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .btn a {
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            background-color: #007bff;
            transition: background-color 0.3s ease;
        }

        .btn a:hover {
            background-color: #0056b3;
        }
/* Task Card: Make it responsive */
.task-card {
    width: 100%; /* Full width for smaller screens */
    max-width: 100%; /* Prevent overflow */
    margin: 15px auto; /* Center align on smaller devices */
    padding: 15px; /* Reduce padding for compact design */
    border-radius: 10px;
    background: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Task Details: Allow flexibility */
.task-details div {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap; /* Stack items on smaller screens */
    margin-bottom: 10px;
}

.task-details div strong {
    width: auto; /* Remove fixed width */
    flex: 1; /* Allow flexible sizing */
    color: #333;
    font-weight: bold;
}

/* Description box for responsiveness */
.description {
    max-height: 80px; /* Adjust max height for smaller screens */
    overflow-y: auto;
    padding: 10px;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px; /* Smaller font size */
}

/* Media Query: Small Screens (less than 768px) */
@media (max-width: 768px) {
    .task-card {
        padding: 10px; /* Reduce padding for smaller screens */
    }

    .task-details div {
        flex-direction: column; /* Stack items vertically */
        margin-bottom: 10px;
    }

    .task-details div strong {
        width: 100%; /* Make titles take full width */
        margin-bottom: 5px;
    }

    .description {
        max-height: 60px; /* Compact view for descriptions */
        font-size: 12px; /* Smaller font for small devices */
    }
}

/* Media Query: Very Small Screens (less than 480px) */
@media (max-width: 480px) {
    .task-card {
        padding: 8px; /* Further reduce padding */
    }

    .description {
        max-height: 50px; /* Limit description height */
        font-size: 12px;
    }
}


        .task-details div {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .task-details div strong {
            width: 180px;
            color: #333;
            font-weight: bold;
        }

        .task-actions {
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
        }

        .task-actions a, .task-actions button {
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .task-actions a {
            background-color: #28a745;
        }

        .task-actions button {
            background-color: #dc3545;
        }

        .task-actions a:hover {
            background-color: #218838;
        }

        .task-actions button:hover {
            background-color: #c82333;
        }

        .description {
            max-height: 100px;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .media-link img {
            max-width: 50px;
            max-height: 50px;
            margin: 5px 0;
        }

        .media-link a {
            text-decoration: none;
            color: #007bff;
        }

        .media-link a:hover {
            text-decoration: underline;
        }
        #scroll-to-top {
    position: fixed;        /* Fixed positioning */
    bottom: 20px;           /* Distance from the bottom of the page */
    right: 20px;            /* Distance from the right of the page */
    font-size: 36px;        /* Size of the icon */
    background-color: #007bff;  /* No background */
    color: white;           /* White color */
    padding: 10px;          /* Padding around the icon */
    border-radius: 50%;     /* Make it circular */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Subtle shadow for better visibility */
    cursor: pointer;       /* Make it clickable */
}

#scroll-to-top:hover {
    background-color: rgba(0, 0, 0, 0.1); /* Light background when hovered */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* Slightly stronger shadow */
}
.search-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 20px 0;
}

.search-form {
    display: flex;
    gap: 10px;
    border: 2px solid #ccc;
    border-radius: 8px;
    padding: 5px;
    background-color: #f9f9f9;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.search-form input[type="text"] {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    outline: none;
    transition: border-color 0.3s ease;
}

.search-form input[type="text"]:focus {
    border-color: #007bff;
}

.search-form button {
    padding: 10px 20px;
    border: none;
    background-color: #007bff;
    color: white;
    font-size: 16px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.search-form button:hover {
    background-color: #0056b3;
}

.search-form button:active {
    background-color: #003f7f;
}
.task-details div:hover {
        background-color: #f1f1f1; /* Change background on hover */
        border-radius: 5px;
        cursor: pointer; /* Show pointer cursor */
        transition: background-color 0.3s ease; /* Smooth transition */
    }

    /* Hover effect for specific sections (e.g., "Remarks", "Car Number") */
    .task-details div strong {
        color: #000;
        font-weight: bold;
        transition: color 0.3s ease;
    }

    /* Hover color for task titles */
    /* .task-details div strong:hover {
        color: #0056b3;
    } */

    /* Hover effect on media links */
    .media-link a:hover {
        text-decoration: underline;
        color: #007bff;
    }

    /* Hover effect for task cards */
    /* .task-card:hover {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transform: scale(1.02);
        transition: all 0.3s ease;
    }
    

    .task-actions a:hover, .task-actions button:hover {
        background-color: #0056b3; 
    } */
    </style>
</head>
<body>
    <div class="container">
        <div class="btn">
            <a href="/tasks/create">Create Task</a>
            <a href="/emp-task-download">Export All</a>
            <a href="/logout" style="background-color: rgb(244, 102, 102);">Logout</a>
        </div>
        <a href="employee" id="scroll-to-top">
            <i class="fa-solid fa-arrow-up"></i>
        </a> 
        <h1>Employee Login - Vahan Help</h1>
        <h1>All Tasks</h1>
        <div class="search-bar">
            <form action="/tasks/search" method="GET" class="search-form">
                <input type="text" name="carNum" placeholder="Search by Car Number" required>
                <button type="submit">Search</button>
            </form>
        </div>
        

        <% tasks.forEach(task => { %>
        <div class="task-card">
            <h2>Car Number: <%= task.carNum %></h2>
            <div class="task-details">
                <div><strong>File Received Date:</strong> <%= task.fileReceivedDate ? task.fileReceivedDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Client Name:</strong> <%= task.clientName %></div>
                <div><strong>Case Type:</strong> <%= task.caseType %></div>
                <div><strong>Additional Work:</strong> <%= task.AdditionalWork %></div>
                <div><strong>Task Type:</strong> <%= task.name %></div>
                <div><strong>HPT Name:</strong> <%= task.hptName %></div>
                <div><strong>HPA:</strong> <%= task.HPA %></div>
                <div><strong>Chassis Number:</strong> <%= task.chesisnum %></div>
                <div><strong>Engine Number:</strong> <%= task.engineNum %></div>
                <div><strong>Seller Name:</strong> <%= task.sellerName %></div>
                <div><strong>Seller Number:</strong> <%= task.sellerNum %></div>
                <div><strong>Buyer Name:</strong> <%= task.buyerName %></div>
                <div><strong>Buyer Number:</strong> <%= task.buyerNum %></div>
                <div><strong>Seller RTO Location:</strong> <%= task.seller_RTO_location %></div>
                <div><strong>Buyer RTO Location:</strong> <%= task.buyer_RTO_location %></div>
                <div><strong>Seller Aligned Date:</strong> <%= task.sellerAlignedDate ? task.sellerAlignedDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Buyer Aligned Date:</strong> <%= task.buyerAlignedDate ? task.buyerAlignedDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>NOC Issued Date:</strong> <%= task.NOCissuedDate ? task.NOCissuedDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Phy NOC Status:</strong> <%= task.status_NOC %></div>
                <div><strong>NOC Received Date:</strong> <%= task.NOCreceivedDate ? task.NOCreceivedDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Task-1 Agent Name (Seller):</strong> <%= task.task1agentname %></div>
                <div><strong>Task-2 Agent Name (Buyer):</strong> <%= task.task2agentname %></div>
                <div><strong>Transfer Date:</strong> <%= task.transferDate ? task.transferDate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Handover Date (RC):</strong> <%= task.HandoverDate_RC ? task.HandoverDate_RC.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Handover Date (NOC):</strong> <%= task.HandoverDate_NOC ? task.HandoverDate_NOC.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Delivery Date:</strong> <%= task.deliverdate ? task.deliverdate.toISOString().split('T')[0] : 'N/A' %></div>
                <div><strong>Courier done Date:</strong> <%= task.ourier ? task.ourier.toISOString().split('T')[0] : 'N/A' %></div>
              
                <div><strong>Remarks:</strong> <div class="description"><%= task.description %></div></div>
                <div><strong>Phy RC Status:</strong> <%= task.status_RC %></div>
                <div><strong>Status:</strong> <%= task.state %></div>
                <div class="media-link">
                    <strong>Seller Photo:</strong> <a href="<%= task.sellerPhoto %>" target="_blank"><%= task.sellerPhoto ? 'View' : 'Not Available' %></a>
                </div>
                <div class="media-link">
                    <strong>Seller Photo:</strong> <a href="<%= task.buyerPhoto %>" target="_blank"><%= task.buyerPhoto ? 'View' : 'Not Available' %></a>
                </div>
                <div><strong>Seller Docs:</strong> <a href="<%= task.sellerDocs %>" target="_blank"><%= task.sellerDocs ? 'View' : 'No Docs Available' %></a></div>
                <div><strong>Buyer Docs:</strong> <a href="<%= task.buyerDocs %>" target="_blank"><%= task.buyerDocs ? 'View' : 'No Docs Available' %></a></div>
                <div><strong>Transfer E-receipt:</strong> <a href="<%= task.transferReceipt %>" target="_blank"><%= task.transferReceipt ? 'View' : 'Not Available' %></a></div>
                <div><strong>NOC Receipt:</strong> <a href="<%= task.nocReceipt %>" target="_blank"><%= task.nocReceipt ? 'View' : 'Not Available' %></a></div>
                <div><strong>Car video:</strong> <a href="<%= task.carVideo %>" target="_blank"><%= task.carVideo ? 'View' : 'Not Available' %></a></div>
                <div><strong>Seller video:</strong> <a href="<%= task.sellerVideo %>" target="_blank"><%= task.sellerVideo ? 'View' : 'Not Available' %></a></div>
                <div><strong>CareOf video:</strong> <a href="<%= task.careOfVideo %>" target="_blank"><%= task.careOfVideo ? 'View' : 'Not Available' %></a></div>
            </div>
            <div class="task-actions">
                <a href="/tasks/edit/<%= task._id %>">Edit Task</a>
                <a href="/assign/tasks/edit/<%= task._id %>">Assign Agent</a>
                <form action="/tasks/delete/<%= task._id %>" method="POST" style="display:inline;">
                    <button type="submit">Delete</button>
                </form>
            </div>
        </div>
        <% }) %>
    </div>
</body>
</html>
